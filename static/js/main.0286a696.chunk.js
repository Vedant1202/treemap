(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{159:function(e,t,a){e.exports=a(254)},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t){},171:function(e,t,a){},200:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),i=a(74),l=a(42),s=(a(168),a(51)),u=a(52),m=a(56),d=a(55),h=(a(169),a(29)),p=a(261),f=a(86),g=a(262),E=a(114),b=a(263),v=a(264),y=a(267),w=a(265),j=a(266),C=a(88),N=function(e){return{type:C.a.SET_CURRENT_USER,payload:e}},S=a(59),O=a.n(S),k=(a(171),{apiUrl:"https://www.eudocia.ml:4055/v1/",mapboxToken:"pk.eyJ1IjoidmV5eWRhbnQiLCJhIjoiY2tnM253MGlwMGJwejJ3cGpnY2Z4MndoayJ9._yAhXrsBN98XzbyNFj_kHA"}),T=a(258),U=T.a.Link,_=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){O()({url:k.apiUrl+"auth/login",type:"json",method:"post",data:n.state,error:function(e){alert(e.message)},success:function(e){n.props.setCurrentUser(e),n.props.history.push("/homepage"),window.location.assign("/")}})},n.state={email:"",password:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form"},r.a.createElement(g.b,{direction:"vertical",className:"login-form-space"},r.a.createElement(p.a,{className:"login-input",placeholder:"Enter your email",prefix:r.a.createElement(b.a,{className:"site-form-item-icon"}),suffix:r.a.createElement(f.a,{title:"Email"},r.a.createElement(v.a,{style:{color:"rgba(0,0,0,.45)"}})),onChange:function(t){e.handleEmailChange(t)},bordered:!1}),r.a.createElement(p.a.Password,{className:"login-input",placeholder:"input password",iconRender:function(e){return e?r.a.createElement(w.a,null):r.a.createElement(j.a,null)},prefix:r.a.createElement(y.a,{className:"site-form-item-icon"}),onChange:function(t){e.handlePasswordChange(t)}}),r.a.createElement(E.a,{type:"primary",block:!0,onClick:function(){e.handleSubmit()}},"Login"),r.a.createElement(T.a,null,r.a.createElement(U,{href:"/register",title:"New User? Register here"}))))}}]),a}(r.a.Component),M=Object(h.g)(Object(l.b)(null,(function(e){return{setCurrentUser:function(t){e(N(t))}}}))(_)),x=(a(200),a(257)),L=x.a.Title,R=function(){return r.a.createElement("div",{classname:"login-page-div",style:{padding:"10vh"}},r.a.createElement(L,{className:"login-page-title"},"Tree Map"),r.a.createElement(M,null))},A=(a(226),function(){return r.a.createElement("div",{id:"main"},r.a.createElement("div",{className:"fof"},r.a.createElement("h1",null,"Error 404: Page not found...")))}),P=(a(227),a(260)),I=(a(228),a(259)),J=a(157),z=a(256),B=a(150),D=a(143),K=a.n(D),W=a(65),G=(0,a(65).createSelector)([function(e){return e.user}],(function(e){return e.currentUser})),H=p.a.Search,X=I.a.Panel,Y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({searchKey:e.target.value})},n.handleSearch=function(e){n.fetchData((function(e){n.setState({trees:e.data})}))},n.handleLogout=function(){n.props.setCurrentUser(null),setTimeout((function(){n.props.history.push("/login"),window.location.assign("/")}),1e3),alert("Logout successful!")},n.fetchData=function(e){var t=n.props.user;O()({url:k.apiUrl+"trees/search/"+n.state.searchKey,type:"json",method:"get",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t.tokens.access.token)},contentType:"application/json",success:function(t){e(t)}})},n.handleInfiniteOnLoad=function(){var e=n.state.trees;if(n.setState({loading:!0}),e.length>8)return J.b.warning("That's all we could gather :/"),void n.setState({hasMore:!1,loading:!1});n.setState({loading:!1})},n.handleAddTree=function(e){var t=e.common_name,a=e.scientific_name,r=e.image_url,o=n.props,c=o.latitude,i=o.longitude,l=o.user,s={common_name:t,scientific_name:a,image_url:r,user_by:l.user,latitude:c,longitude:i};O()({url:k.apiUrl+"trees",type:"json",method:"post",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(l.tokens.access.token)},data:s,error:function(e){console.log(e)},success:function(e){alert("Tree added!"),window.location.reload()}})},n.state={searchKey:"",trees:[],loading:!1,hasMore:!0},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state.trees,a=this.props.user;return r.a.createElement("div",{className:"profile-sidebar-div"},r.a.createElement("div",{className:"profile-section"},r.a.createElement(P.a,{className:"profile-avatar",icon:r.a.createElement(b.a,null),size:100}),r.a.createElement("div",{className:"profile-username"},a.user.name," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"add-new-tree-form"},r.a.createElement(I.a,{defaultActiveKey:["1"],ghost:!0},r.a.createElement(X,{header:"Add new tree?",key:"1"},r.a.createElement(H,{placeholder:"Search plants to add",enterButton:"Search",size:"large",width:"15vw",value:this.state.searchKey,onChange:function(t){return e.handleChange(t)},onSearch:function(t){return e.handleSearch(t)}}),r.a.createElement("div",{className:"search-results"},r.a.createElement("div",{className:"demo-infinite-container"},r.a.createElement(K.a,{initialLoad:!1,pageStart:0,loadMore:this.handleInfiniteOnLoad,hasMore:!this.state.loading&&this.state.hasMore,useWindow:!1},r.a.createElement(z.b,{dataSource:t,renderItem:function(t){return r.a.createElement(z.b.Item,{key:t.id},r.a.createElement(z.b.Item.Meta,{avatar:r.a.createElement(P.a,{src:t.image_url}),title:t.common_name,description:r.a.createElement("span",null,"Scientific Name: ",t.scientific_name)}),r.a.createElement("div",null,r.a.createElement(E.a,{type:"primary",block:!0,onClick:function(){e.handleAddTree(t)}},"Add")))}},this.state.loading&&this.state.hasMore&&r.a.createElement("div",{className:"demo-loading-container"},r.a.createElement(B.a,null))))))))),r.a.createElement("div",{className:"logout-section"},r.a.createElement(E.a,{block:!0,onClick:function(){e.handleLogout()}},"Logout"))))}}]),a}(r.a.Component),F=Object(W.createStructuredSelector)({user:G}),Q=Object(h.g)(Object(l.b)(F,(function(e){return{setCurrentUser:function(t){e(N(t))}}}))(Y)),V=a(248);V.accessToken=k.mapboxToken;var Z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).fetchData=function(e){var t=n.props.user;O()({url:k.apiUrl+"trees",type:"json",method:"get",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t.tokens.access.token)},contentType:"application/json",success:function(t){e(t)}})},n.componentDidMount=function(){n.fetchData((function(e){n.setState({markers:e.results},(function(){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords,r=a.latitude,o=a.longitude,c=new V.Map({container:n.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[Number(o),Number(r)],zoom:13});n.setState({latitude:r,longitude:o},(function(){e.results.forEach((function(e){var t=[e.longitude,e.latitude],a=new V.Popup({offset:25}).setHTML("\n                                    <strong>".concat(e.common_name,'</strong><p>\n                                    <img src="').concat(e.image_url,'" style="max-width: 120px"></img>\n                                    <p>\n                                        Put up by: ').concat(e.user_by.name," <br>\n                                        Latitude: ").concat(e.latitude," <br>\n                                        Longitude: ").concat(e.longitude," <br>\n                                    </p>\n                                "));(new V.Marker).setLngLat(t).setPopup(a).addTo(c)}));new V.Marker({color:"#f00"}).setLngLat([Number(o),Number(r)]).addTo(c);c.addControl(new V.NavigationControl)}))}))}))}))},n.state={maps:null,latitude:null,longitude:null,markers:[]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.latitude,n=t.longitude;return r.a.createElement("div",{className:"home-page-div"},r.a.createElement(Q,{latitude:a,longitude:n}),r.a.createElement("div",{id:"mapbox-maps-div",ref:function(t){return e.mapContainer=t},className:"mapContainer"}))}}]),a}(r.a.Component),$=Object(W.createStructuredSelector)({user:G}),q=Object(l.b)($)(Z),ee=(a(249),a(268)),te=(a(250),T.a.Link),ae=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleNameChange=function(e){n.setState({name:e.target.value})},n.handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){O()({url:k.apiUrl+"auth/register",type:"json",method:"post",data:n.state,error:function(e){alert(JSON.parse(e.response).message)},success:function(e){n.props.setCurrentUser(e),n.props.history.push("/homepage"),window.location.assign("/")}})},n.state={name:"",email:"",password:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"register-form"},r.a.createElement(g.b,{direction:"vertical",className:"register-form-space"},r.a.createElement(p.a,{className:"register-input",placeholder:"Enter your name",prefix:r.a.createElement(ee.a,{className:"site-form-item-icon"}),suffix:r.a.createElement(f.a,{title:"Name"},r.a.createElement(v.a,{style:{color:"rgba(0,0,0,.45)"}})),onChange:function(t){e.handleNameChange(t)},bordered:!1}),r.a.createElement(p.a,{className:"register-input",placeholder:"Enter your email",prefix:r.a.createElement(b.a,{className:"site-form-item-icon"}),suffix:r.a.createElement(f.a,{title:"Email"},r.a.createElement(v.a,{style:{color:"rgba(0,0,0,.45)"}})),onChange:function(t){e.handleEmailChange(t)},bordered:!1}),r.a.createElement(p.a.Password,{className:"register-input",placeholder:"input password",iconRender:function(e){return e?r.a.createElement(w.a,null):r.a.createElement(j.a,null)},prefix:r.a.createElement(y.a,{className:"site-form-item-icon"}),onChange:function(t){e.handlePasswordChange(t)}}),r.a.createElement(E.a,{type:"primary",block:!0,onClick:function(){e.handleSubmit()}},"Register"),r.a.createElement(T.a,null,r.a.createElement(te,{href:"/login",title:"Already Registered? Login here"}))))}}]),a}(r.a.Component),ne=Object(h.g)(Object(l.b)(null,(function(e){return{setCurrentUser:function(t){e(N(t))}}}))(ae)),re=x.a.Title,oe=function(){return r.a.createElement("div",{classname:"register-page-div",style:{padding:"10vh"}},r.a.createElement(re,{className:"register-page-title"},"Tree Map"),r.a.createElement(ne,null))},ce=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={user:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return e.state.user?r.a.createElement(h.a,{to:"/homepage"}):r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(h.b,{exact:!0,path:"/homepage",render:function(){return e.state.user?r.a.createElement(q,null):r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return e.state.user?r.a.createElement(h.a,{to:"/"}):r.a.createElement(R,null)}}),r.a.createElement(h.b,{exact:!0,path:"/register",render:function(){return e.state.user?r.a.createElement(h.a,{to:"/"}):r.a.createElement(oe,null)}}),r.a.createElement(h.b,{path:"*",component:A}))}}]),a}(r.a.Component),ie=Object(W.createStructuredSelector)({user:G}),le=Object(l.b)(ie)(ce),se=a(152),ue=a(103),me=(a(251).default,a(58)),de=me.createStore,he=me.applyMiddleware;var pe=de(a(255).default,he.apply(void 0,[])),fe=Object(ue.b)(pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{store:pe},r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(se.a,{persistor:fe},r.a.createElement(le,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},255:function(e,t,a){"use strict";a.r(t);var n=a(58),r=a(115),o=a(88),c={currentUser:null},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case o.a.SET_CURRENT_USER:return Object(r.a)(Object(r.a)({},e),{},{currentUser:n});default:return e}},l=a(153),s=a.n(l),u=a(103),m=Object(n.combineReducers)({user:i}),d={key:"treemap",storage:s.a};t.default=Object(u.a)(d,m)},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={SET_CURRENT_USER:"SET_CURRENT_USER"}}},[[159,1,2]]]);
//# sourceMappingURL=main.0286a696.chunk.js.map