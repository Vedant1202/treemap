(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{159:function(e,a,t){e.exports=t(254)},168:function(e,a,t){},169:function(e,a,t){},170:function(e,a){},171:function(e,a,t){},200:function(e,a,t){},226:function(e,a,t){},227:function(e,a,t){},228:function(e,a,t){},249:function(e,a,t){},250:function(e,a,t){},254:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(12),c=t.n(i),o=t(74),s=t(43),l=(t(168),t(51)),m=t(52),u=t(56),d=t(55),p=(t(169),t(29)),f=t(261),g=t(86),h=t(262),b=t(114),E=t(263),v=t(264),_=t(267),y=t(265),N=t(266),w=t(88),j=function(e){return{type:w.a.SET_CURRENT_USER,payload:e}},S=t(59),O=t.n(S),C=(t(171),{apiUrl:"https://www.eudocia.ml:4055/v1/",mapboxToken:"pk.eyJ1IjoidmV5eWRhbnQiLCJhIjoiY2tnM253MGlwMGJwejJ3cGpnY2Z4MndoayJ9._yAhXrsBN98XzbyNFj_kHA",apiKey:"oejhZ0SbHagay3f0ug2rwjjFJrZoSPBhOHMmfKMrv0k"}),k=t(258),T=k.a.Link,U=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){O()({url:C.apiUrl+"auth/login",type:"json",method:"post",data:n.state,error:function(e){alert(e.message)},success:function(e){n.props.setCurrentUser(e),n.props.history.push("/homepage"),window.location.assign("/")}})},n.state={email:"",password:""},n}return Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form"},r.a.createElement(h.b,{direction:"vertical",className:"login-form-space"},r.a.createElement(f.a,{className:"login-input",placeholder:"Enter your email",prefix:r.a.createElement(E.a,{className:"site-form-item-icon"}),suffix:r.a.createElement(g.a,{title:"Email"},r.a.createElement(v.a,{style:{color:"rgba(0,0,0,.45)"}})),onChange:function(a){e.handleEmailChange(a)},bordered:!1}),r.a.createElement(f.a.Password,{className:"login-input",placeholder:"input password",iconRender:function(e){return e?r.a.createElement(y.a,null):r.a.createElement(N.a,null)},prefix:r.a.createElement(_.a,{className:"site-form-item-icon"}),onChange:function(a){e.handlePasswordChange(a)}}),r.a.createElement(b.a,{type:"primary",block:!0,onClick:function(){e.handleSubmit()}},"Login"),r.a.createElement(k.a,null,r.a.createElement(T,{href:"/register",title:"New User? Register here"}))))}}]),t}(r.a.Component),M=Object(p.g)(Object(s.b)(null,(function(e){return{setCurrentUser:function(a){e(j(a))}}}))(U)),R=(t(200),t(257)),x=R.a.Title,A=function(){return r.a.createElement("div",{classname:"login-page-div",style:{padding:"10vh"}},r.a.createElement(x,{className:"login-page-title"},"Tree Map"),r.a.createElement(M,null))},P=(t(226),function(){return r.a.createElement("div",{id:"main"},r.a.createElement("div",{className:"fof"},r.a.createElement("h1",null,"Error 404: Page not found...")))}),L=(t(227),t(260)),J=(t(228),t(259)),I=t(157),z=t(256),B=t(150),D=t(143),K=t.n(D),H=t(65),W=(0,t(65).createSelector)([function(e){return e.user}],(function(e){return e.currentUser})),F=JSON.stringify([{id:111221,commonName:"clustered field sedge",scientific_name:"Carex praegracilis",main_image_url:"http://d2seqvvyy3b8p2.cloudfront.net/ca3ed9f8232591f0c50dd1b9d587bdd0.jpg"},{id:132177,commonName:"white ash",scientific_name:"Fraxinus americana",main_image_url:"https://bs.floristic.org/image/o/ac78a828d9d65c2c27ff47716488f0ceda6b94f0"},{id:177453,commonName:"European mountain ash",scientific_name:"Sorbus aucuparia",main_image_url:"https://bs.floristic.org/image/o/63073d2fbf45b90701279405ecc2eec0272906ed"},{id:182692,commonName:"spreading hedgeparsley",scientific_name:"Torilis arvensis",main_image_url:"https://bs.floristic.org/image/o/a95a92e4a3c02b87f8ecc8c7f6886cc52bec31da"},{id:238331,commonName:"aster",scientific_name:"Senecio gamolepis",main_image_url:""},{id:543494,commonName:"Christmastree",scientific_name:"Abies alba",main_image_url:"https://bs.floristic.org/image/o/7928c21ee9fdc5ffa423501d3ba54084247cf9a9"},{id:116854,scientific_name:"Carex praegracilis",commonName:"clustered field sedge",main_image_url:"http://d2seqvvyy3b8p2.cloudfront.net/ca3ed9f8232591f0c50dd1b9d587bdd0.jpg"},{id:137810,scientific_name:"Fraxinus americana",commonName:"white ash",main_image_url:"https://bs.floristic.org/image/o/ac78a828d9d65c2c27ff47716488f0ceda6b94f0"},{id:183086,scientific_name:"Sorbus aucuparia",commonName:"European mountain ash",main_image_url:"https://bs.floristic.org/image/o/63073d2fbf45b90701279405ecc2eec0272906ed"},{id:188325,scientific_name:"Torilis arvensis",commonName:"spreading hedgeparsley",main_image_url:"https://bs.floristic.org/image/o/a95a92e4a3c02b87f8ecc8c7f6886cc52bec31da"},{id:188328,scientific_name:"Torilis arvensis subsp. purpurea",commonName:"spreading hedgeparsley",main_image_url:""},{id:210279,scientific_name:"Torilis arvensis subsp. arvensis",commonName:"spreading hedgeparsley",main_image_url:""},{id:210280,scientific_name:"Torilis arvensis subsp. neglecta",commonName:"spreading hedgeparsley",main_image_url:""},{id:273225,scientific_name:"Senecio gamolepis",commonName:"",main_image_url:""},{id:328914,scientific_name:"Torilis arvensis subsp. turcomanica",commonName:"spreading hedgeparsley",main_image_url:""},{id:328915,scientific_name:"Torilis arvensis subsp. recta",commonName:"spreading hedgeparsley",main_image_url:""},{id:1053508,scientific_name:"Sorbus aucuparia subsp. pohuashanensis",commonName:"European mountain ash",main_image_url:""},{id:1160714,scientific_name:"Sorbus aucuparia subsp. aucuparia",commonName:"European mountain ash",main_image_url:""},{id:1164147,scientific_name:"Torilis arvensis subsp. heterophylla",commonName:"spreading hedgeparsley",main_image_url:""},{id:1164724,scientific_name:"Abies alba",commonName:"Christmastree",main_image_url:"https://bs.floristic.org/image/o/7928c21ee9fdc5ffa423501d3ba54084247cf9a9"},{id:1254480,scientific_name:"Sorbus aucuparia subsp. maderensis",commonName:"",main_image_url:""}]),G=JSON.parse(F),Z=f.a.Search,q=J.a.Panel,V=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){n.setState({searchKey:e.target.value})},n.handleSearch=function(e){var a=n.state.searchKey,t=G.filter((function(e){return e.commonName.includes(a)||e.scientific_name.includes(a)}));n.setState({trees:t}),console.log(t)},n.handleLogout=function(){n.props.setCurrentUser(null),setTimeout((function(){n.props.history.push("/login"),window.location.assign("/")}),1e3),alert("Logout successful!")},n.fetchData=function(e){var a=n.props.user;O()({url:C.apiUrl+"trees/search/"+n.state.searchKey,type:"json",method:"get",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(a.tokens.access.token)},contentType:"application/json",success:function(a){e(a)}})},n.handleInfiniteOnLoad=function(){var e=n.state.trees;if(n.setState({loading:!0}),e.length>8)return I.b.warning("That's all we could gather :/"),void n.setState({hasMore:!1,loading:!1});n.setState({loading:!1})},n.handleAddTree=function(e){var a=e.commonName,t=e.scientific_name,r=e.main_image_url,i=n.props,c=i.latitude,o=i.longitude,s=i.user,l={name:a,common_name:a,scientific_name:t,image_url:r,user_by:s.user,latitude:c,longitude:o};O()({url:C.apiUrl+"trees",type:"json",method:"post",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(s.tokens.access.token)},data:l,error:function(e){console.log(e)},success:function(e){alert("Tree added!"),window.location.reload()}})},n.state={searchKey:"",trees:[],loading:!1,hasMore:!0},n}return Object(m.a)(t,[{key:"render",value:function(){var e=this,a=this.state.trees,t=this.props.user;return r.a.createElement("div",{className:"profile-sidebar-div"},r.a.createElement("div",{className:"profile-section"},r.a.createElement(L.a,{className:"profile-avatar",icon:r.a.createElement(E.a,null),size:100}),r.a.createElement("div",{className:"profile-username"},t.user.name," ",r.a.createElement("br",null)),r.a.createElement("div",{className:"add-new-tree-form"},r.a.createElement(J.a,{defaultActiveKey:["1"],ghost:!0},r.a.createElement(q,{header:"Add new tree?",key:"1"},r.a.createElement(Z,{placeholder:"Search plants to add",enterButton:"Search",size:"large",width:"15vw",value:this.state.searchKey,onChange:function(a){return e.handleChange(a)},onSearch:function(a){return e.handleSearch(a)}}),r.a.createElement("div",{className:"search-results"},r.a.createElement("div",{className:"demo-infinite-container"},r.a.createElement(K.a,{initialLoad:!1,pageStart:0,loadMore:this.handleInfiniteOnLoad,hasMore:!this.state.loading&&this.state.hasMore,useWindow:!1},r.a.createElement(z.b,{dataSource:a,renderItem:function(a){return r.a.createElement(z.b.Item,{key:a.id},r.a.createElement(z.b.Item.Meta,{avatar:r.a.createElement(L.a,{src:a.main_image_url}),title:a.commonName,description:r.a.createElement("span",null,"Scientific Name: ",a.scientific_name)}),r.a.createElement("div",null,r.a.createElement(b.a,{type:"primary",block:!0,onClick:function(){e.handleAddTree(a)}},"Add")))}},this.state.loading&&this.state.hasMore&&r.a.createElement("div",{className:"demo-loading-container"},r.a.createElement(B.a,null))))))))),r.a.createElement("div",{className:"logout-section"},r.a.createElement(b.a,{block:!0,onClick:function(){e.handleLogout()}},"Logout"))))}}]),t}(r.a.Component),X=Object(H.createStructuredSelector)({user:W}),Y=Object(p.g)(Object(s.b)(X,(function(e){return{setCurrentUser:function(a){e(j(a))}}}))(V));t(248).accessToken=C.mapboxToken;var Q=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).fetchData=function(e){var a=n.props.user;O()({url:C.apiUrl+"trees",type:"json",method:"get",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(a.tokens.access.token)},contentType:"application/json",success:function(a){e(a)}})},n.mapRef=r.a.createRef(),n.changeOpacity=function(e){e.target.style.opacity=.6},n.changeOpacityToOne=function(e){e.target.style.opacity=1},n.htmlToElement=function(e){var a=document.createElement("template");return e=e.trim(),a.innerHTML=e,a.content.firstChild},n.componentDidMount=function(){n.fetchData((function(e){navigator.geolocation.getCurrentPosition((function(a){var t=a.coords,r=t.latitude,i=t.longitude;n.setState({markers:e.results},(function(){console.log(n.state.markers);var e=window.H,a=new e.service.Platform({apikey:C.apiKey}).createDefaultLayers(),t=new e.Map(n.mapRef.current,a.vector.normal.map,{zoom:10,center:{lat:r,lng:i}});e.ui.UI.createDefault(t,a);window.addEventListener("resize",(function(){return t.getViewPort().resize()}));new e.mapevents.Behavior(new e.mapevents.MapEvents(t));n.state.markers.forEach((function(a){a.name,a.user_by.name,a.latitude,a.longitude;var r=n.htmlToElement('<Popover \n                                                        title="Plant Name: '.concat(a.name,", Put up by: ").concat(a.user_by.name,' "\n                                                    >\n                                                        <div class="plant">\n                                                            <div class="plant__leaves"></div>\n                                                        </div>\n                                                    </Popover>')),i=new e.map.DomIcon(r),c=new e.map.DomMarker({lat:a.latitude,lng:a.longitude},{icon:i});c.draggable=!0,t.addObject(c)}));var c=new e.map.Marker({lat:r,lng:i});t.addObject(c),n.setState({map:t,latitude:r,longitude:i})}))}))}))},n.state={maps:null,latitude:null,longitude:null,markers:[],map:null},n}return Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.state.map&&this.state.map.dispose()}},{key:"render",value:function(){var e=this.state,a=e.latitude,t=e.longitude;return r.a.createElement("div",{className:"home-page-div"},r.a.createElement(Y,{latitude:a,longitude:t}),r.a.createElement("div",{ref:this.mapRef,className:"mapContainer"}))}}]),t}(r.a.Component),$=Object(H.createStructuredSelector)({user:W}),ee=Object(s.b)($)(Q),ae=(t(249),t(268)),te=(t(250),k.a.Link),ne=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleNameChange=function(e){n.setState({name:e.target.value})},n.handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){O()({url:C.apiUrl+"auth/register",type:"json",method:"post",data:n.state,error:function(e){alert(JSON.parse(e.response).message)},success:function(e){n.props.setCurrentUser(e),n.props.history.push("/homepage"),window.location.assign("/")}})},n.state={name:"",email:"",password:""},n}return Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"register-form"},r.a.createElement(h.b,{direction:"vertical",className:"register-form-space"},r.a.createElement(f.a,{className:"register-input",placeholder:"Enter your name",prefix:r.a.createElement(ae.a,{className:"site-form-item-icon"}),suffix:r.a.createElement(g.a,{title:"Name"},r.a.createElement(v.a,{style:{color:"rgba(0,0,0,.45)"}})),onChange:function(a){e.handleNameChange(a)},bordered:!1}),r.a.createElement(f.a,{className:"register-input",placeholder:"Enter your email",prefix:r.a.createElement(E.a,{className:"site-form-item-icon"}),suffix:r.a.createElement(g.a,{title:"Email"},r.a.createElement(v.a,{style:{color:"rgba(0,0,0,.45)"}})),onChange:function(a){e.handleEmailChange(a)},bordered:!1}),r.a.createElement(f.a.Password,{className:"register-input",placeholder:"input password",iconRender:function(e){return e?r.a.createElement(y.a,null):r.a.createElement(N.a,null)},prefix:r.a.createElement(_.a,{className:"site-form-item-icon"}),onChange:function(a){e.handlePasswordChange(a)}}),r.a.createElement(b.a,{type:"primary",block:!0,onClick:function(){e.handleSubmit()}},"Register"),r.a.createElement(k.a,null,r.a.createElement(te,{href:"/login",title:"Already Registered? Login here"}))))}}]),t}(r.a.Component),re=Object(p.g)(Object(s.b)(null,(function(e){return{setCurrentUser:function(a){e(j(a))}}}))(ne)),ie=R.a.Title,ce=function(){return r.a.createElement("div",{classname:"register-page-div",style:{padding:"10vh"}},r.a.createElement(ie,{className:"register-page-title"},"Tree Map"),r.a.createElement(re,null))},oe=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={user:null},n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this;return r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(){return e.state.user?r.a.createElement(p.a,{to:"/homepage"}):r.a.createElement(p.a,{to:"/login"})}}),r.a.createElement(p.b,{exact:!0,path:"/homepage",render:function(){return e.state.user?r.a.createElement(ee,null):r.a.createElement(p.a,{to:"/login"})}}),r.a.createElement(p.b,{exact:!0,path:"/login",render:function(){return e.state.user?r.a.createElement(p.a,{to:"/"}):r.a.createElement(A,null)}}),r.a.createElement(p.b,{exact:!0,path:"/register",render:function(){return e.state.user?r.a.createElement(p.a,{to:"/"}):r.a.createElement(ce,null)}}),r.a.createElement(p.b,{path:"*",component:P}))}}]),t}(r.a.Component),se=Object(H.createStructuredSelector)({user:W}),le=Object(s.b)(se)(oe),me=t(152),ue=t(103),de=(t(251).default,t(58)),pe=de.createStore,fe=de.applyMiddleware;var ge=pe(t(255).default,fe.apply(void 0,[])),he=Object(ue.b)(ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(s.a,{store:ge},r.a.createElement(o.a,{basename:"/"},r.a.createElement(me.a,{persistor:he},r.a.createElement(le,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},255:function(e,a,t){"use strict";t.r(a);var n=t(58),r=t(115),i=t(88),c={currentUser:null},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case i.a.SET_CURRENT_USER:return Object(r.a)(Object(r.a)({},e),{},{currentUser:n});default:return e}},s=t(153),l=t.n(s),m=t(103),u=Object(n.combineReducers)({user:o}),d={key:"treemap",storage:l.a};a.default=Object(m.a)(d,u)},88:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var n={SET_CURRENT_USER:"SET_CURRENT_USER"}}},[[159,1,2]]]);
//# sourceMappingURL=main.fcb66214.chunk.js.map